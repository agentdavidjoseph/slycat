<!-- DAC wizard template, modeled on the CCA wizard

S. Martin
4/6/2017

-->

<!-- css styles for palette selection -->
<style>

.dac-palette {
  cursor: pointer;
  display: inline-block;
  vertical-align: bottom;
  margin: 4px 0 4px 6px;
  padding: 4px;
  background: #fff;
  border: solid 1px #aaa;
}

.dac-swatch {
  display: block;
  vertical-align: middle;
  width: 30px;
  height: 18px;
}

</style>

<div class="modal-header">
    <button type="button" class="close" data-bind="click: cancel" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
    <h3 class="modal-title">Dial-A-Cluster Model Preferences</h3>
</div>

<!-- Organizes the tabs in the input wizard. -->
<div class="modal-body">
    <ul class="nav nav-pills">
        <li data-bind="css:{active:tab() == 0}"><a>Variables</a></li>
        <li data-bind="css:{active:tab() == 1}"><a>Metadata</a></li>
        <li data-bind="css:{active:tab() == 2}"><a>Colors</a></li>
        <li data-bind="css:{active:tab() == 3}"><a>Options</a></li>
    </ul>

    <!-- This tab lets the user select whether or not the file to upload is on the local
       computer or a remote computer. -->
    <div class="tab-content">

    <!-- The slycat-table-ingestion tag indicates what to name columns (name: ) and whether
     the columns are checkboxes (bool) or radio buttons (select).  Here we have one
     column include or not include in the meta-data table. -->
    <div data-bind="visible:tab() == 0">
        <label>Select variables to include in analysis.
            <i class="fa fa-question-circle inline-help" aria-hidden="true" title="To make multiple selections or de-selections,
shift-click a range of names then click the include switch."></i>
        </label>
        <slycat-table-ingestion params="
            variables: var_attributes,
            properties: [{name: 'Include', type: 'bool'}]
        "></slycat-table-ingestion>
    </div>

    <!-- The slycat-table-ingestion tag indicates what to name columns (name: ) and whether
         the columns are checkboxes (bool) or radio buttons (select).  Here we have one
         column include or not include in the meta-data table. -->
    <div data-bind="visible:tab() == 1">
        <label>Select metadata to include in analysis.
            <i class="fa fa-question-circle inline-help" aria-hidden="true" title="To make multiple selections or de-selections,
shift-click a range of names then click the include switch."></i>
        </label>
        <slycat-table-ingestion params="
            variables: meta_attributes,
            properties: [{name: 'Include', type: 'bool'}]
        "></slycat-table-ingestion>
    </div>

    <!-- Options for changing the color scheme in DAC. -->
    <div data-bind="visible:tab() == 2">
        <div>
            <label>Select ColorBrewer scale for continuous metadata.
                <i class="fa fa-question-circle inline-help" aria-hidden="true" title="Continuous data is numerical data.  For information on
ColorBrewer scales, see colorbrewer2.org."></i>
            </label>
        </div>

        <div style="margin-bottom: 6px">
            Choose:
            <input type="radio" name="dac-sequential-or-diverging-radios" value="sequential" id="dac-sequential-radio" data-bind="checked: dac_scale_type">
            sequential scales, or
            <input type="radio" name="dac-sequential-or-diverging-radios" value="diverging" id="dac-diverging-radio" data-bind="checked: dac_scale_type">
            diverging scales.
        </div>

        <!-- sequential and divergin color palettes -->
        <div id="dac-sequential-swatches" data-bind="visible: dac_scale_type() == 'sequential'"></div>
        <div id="dac-diverging-swatches" data-bind="visible: dac_scale_type() == 'diverging'"></div>

        <div style="margin-top: 20px">
            <label>Select ColorBrewer scale for discrete metadata.
                <i class="fa fa-question-circle inline-help" aria-hidden="true" title="Discrete data is string data.  If you have ordinal data,
it will be considered numerical unless you use alphabetic labels."></i>
            </label>
        </div>

        <div id="dac-discrete-swatches"></div>

    </div>

    <!-- Options for changing the length of labels, etc. in DAC. -->
    <div data-bind="visible:tab() == 3">
        <label>Options to adjust/optimize the Dial-A-Cluster user inferface.</label>

        <div class="form-group" style="margin-top:30px">
            <label class="col-sm-2 control-label">Maximum label length
                <i class="fa fa-question-circle inline-help" aria-hidden="true"
                title="Length beyond which labels for variables and metadata are truncated
in the Dial-A-Cluster user interface (defaults to 20)."></i>
            </label>
            <div class="col-sm-10">
              <input class="form-control" type="number" min="5" placeholder="20" data-bind="value: dac_max_label_length"></input>
            </div>
        </div>

        <div class="form-group" style="margin-top:30px">
            <label class="col-sm-2 control-label">Maximum plot resolution
                <i class="fa fa-question-circle inline-help" aria-hidden="true"
                title="Maximum number of points to include in a variable plot (for example, number of
time points in a time series plot).  Beyond this number plots are produced
by subsampling from original data (defaults to 500)."></i>
            </label>
            <div class="col-sm-10">
              <input class="form-control" type="number" min="2" placeholder="500" data-bind="value: dac_max_time_points"></input>
            </div>
        </div>


    </div>

    </div>
</div>

<!-- The following organizes the buttons at the bottom of the tabs and tells which javascript functions
     to call when the buttons are pressed. -->
<div class="modal-footer">
    <button class="btn btn-default pull-left" data-bind="visible: [0].indexOf(tab()) == -1, click: back">Back</button>
    <button class="btn btn-primary" data-bind="visible:tab() == 0,click:check_variables">Continue</button>
    <button class="btn btn-primary" data-bind="visible:tab() == 1,click:check_metadata">Continue</button>
    <button class="btn btn-primary" data-bind="visible:tab() == 2,click:speedup_preferences">Continue</button>
    <button class="btn btn-primary" data-bind="visible:tab() == 3,click:finish">Save Preferences & Re-Launch Model</button>
</div>
