<div class="parameter-image-plus-model-wizard">
<div class="modal-header">
  <h3 class="modal-title">New Parameter Image Plus Model</h3>
</div>
<div class="modal-body">
  <ul class="nav nav-pills">
    <li data-bind="css:{active:tab() == 0}"><a>Name Model</a></li>
    <li data-bind="css:{active:tab() == 1}"><a>Locate Data</a></li>
    <li data-bind="css:{active:tab() == 2}" class="ps-tab-remote-data" style="display: none;"><a>Select Data Table</a></li>
    <li data-bind="css:{active:tab() == 3}"><a>Locate Distance Matrix</a></li>
    <li data-bind="css:{active:tab() == 4}" class="ps-tab-remote-matrix" style="display: none;"><a>Select Distance Matrix</a></li>
    <li data-bind="css:{active:tab() == 5}"><a>Select Columns</a></li>
    <li data-bind="css:{active:tab() == 6}"><a>Results</a></li>
  </ul>

  <div class="tab-content">
    <div data-bind="visible:tab() == 0">
      <form class="form-horizontal" role="form">
        <slycat-model-controls params="name:model.name,description:model.description,marking:model.marking"></slycat-model-controls>
      </form>
    </div>

    <div data-bind="visible:tab() == 1">
      <div class="radio local" style="margin-left: 15px;">
        <label>
          <input type="radio" name="local-or-remote-radios" id="local-radio" value="local" data-bind="checked: ps_type">
          Local
        </label>
      </div>
      <div class="local-browser form-horizontal">
        <slycat-local-browser params="selection:browser.selection, disabled: ko.computed(function(){return ps_type() == 'local' ? false : true;})"></slycat-local-browser>
        <slycat-parser-controls params="parser:parser, category:'table', disabled: ko.computed(function(){return ps_type() == 'local' ? false : true;})"></slycat-parser-controls>
      </div>
      <div class="radio remote" style="margin-left: 15px;">
        <label>
          <input type="radio" name="local-or-remote-radios" id="remote-radio" value="remote" data-bind="checked: ps_type">
          Remote
        </label>
      </div>
      <div class="remote-controls">
        <form class="form-horizontal" role="form">
          <slycat-remote-controls params="hostname:remote.hostname,username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:connect"></slycat-remote-controls>
        </form>
      </div>
    </div>

    <div data-bind="visible:tab() == 2" style="height: 400px">
      <slycat-remote-browser params="type:'remote',sid:remote.sid,hostname:remote.hostname,selection:browser.selection,path:browser.path,open_file_callback:load_table"></slycat-remote-browser>
      <slycat-parser-controls params="parser:parser,category:'table'"></slycat-parser-controls>
    </div>

    <div data-bind="visible:tab() == 3">
      <div class="radio local" style="margin-left: 15px;">
        <label>
          <input type="radio" name="matrix-local-or-remote-radios" id="local-radio" value="local" data-bind="checked: matrix_type">
          Local
        </label>
      </div>
      <div class="local-browser form-horizontal">
        <slycat-local-browser params="selection:browser.selection, disabled: ko.computed(function(){return matrix_type() == 'local' ? false : true;})"></slycat-local-browser>
        <slycat-parser-controls params="parser:parser, category:'table', disabled: ko.computed(function(){return matrix_type() == 'local' ? false : true;})"></slycat-parser-controls>
      </div>
      <div class="radio remote" style="margin-left: 15px;">
        <label>
          <input type="radio" name="matrix-local-or-remote-radios" id="remote-radio" value="remote" data-bind="checked: matrix_type">
          Remote
        </label>
      </div>
      <div class="remote-controls">
        <form class="form-horizontal" role="form">
          <slycat-remote-controls params="hostname:remote_matrix.hostname,username:remote_matrix.username,password:remote_matrix.password,status:remote_matrix.status,status_type:remote_matrix.status_type,enable:remote_matrix.enable,focus:remote_matrix.focus,activate:connect"></slycat-remote-controls>
        </form>
      </div>
    </div>

    <div data-bind="visible:tab() == 5">
      <slycat-table-ingestion params="
        variables: attributes,
        properties: [
          {name: 'Classification', type: 'select', values: ['Input','Output','Neither']}, 
          {name: 'Categorical', type: 'bool'}, 
          {name: 'Editable', type: 'bool'}
        ]
      "></slycat-table-ingestion>
    </div>

    <div data-bind="visible:tab() == 6">
      <slycat-model-results params="{mid: model._id}"></slycat-model-results>
    </div>
  </div>
</div>
<div class="modal-footer">
  <button class="btn btn-default pull-left" data-bind="visible:tab() != 6,click:cancel" data-dismiss="modal">Cancel</button>
  <button class="btn btn-default" data-bind="visible:tab() == 0,click:create_model">Continue</button>
  <button class="btn btn-default" data-bind="visible:tab() == 1,click:select_type">Continue</button>
  <button class="btn btn-default local-browser-continue browser-continue" data-bind="visible:tab() == 2,click:upload_table"><i class="fa fa-spinner fa-pulse"></i> Continue</button>
  <button class="btn btn-default" data-bind="visible:tab() == 3,click:connect,enable:remote.enable">Continue</button>
  <button class="btn btn-default remote-browser-continue browser-continue" data-bind="visible:tab() == 4,click:load_table"><i class="fa fa-spinner fa-pulse"></i> Continue</button>
  <button class="btn btn-default" data-bind="visible:tab() == 5,click:finish">Finish</button>
  <button class="btn btn-default pull-left" data-bind="visible:tab() == 6" data-dismiss="modal">Close</button>
  <button class="btn btn-default" data-bind="visible:tab() == 6,click:go_to_model">Go To Model</button>
</div>
</div>